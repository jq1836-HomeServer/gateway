# Nginx Gateway Environment Variables

# External ports
HTTP_PORT=80
HTTPS_PORT=443

# Domain configuration
DOMAIN=your-domain.com
API_DOMAIN=api.your-domain.com

# Internal service hosts and ports
INTERNAL_MAIN_HOST=internal-main
INTERNAL_MAIN_PORT=8000

INTERNAL_APP_HOST=internal-app
INTERNAL_APP_PORT=8080

INTERNAL_API_HOST=internal-api
INTERNAL_API_PORT=3000

INTERNAL_AUTH_HOST=internal-auth
INTERNAL_AUTH_PORT=8081

INTERNAL_WEBSOCKET_HOST=internal-websocket
INTERNAL_WEBSOCKET_PORT=8082

# Upload service (optional - defaults to main service if not specified)
# INTERNAL_UPLOAD_HOST=internal-upload
# INTERNAL_UPLOAD_PORT=3002

# SSL Configuration
SSL_CERT_PATH=/etc/nginx/ssl/server.crt
SSL_KEY_PATH=/etc/nginx/ssl/server.key

# Rate Limiting Configuration
# Format: rate=<number>r/<time_unit> where time_unit can be s(econd), m(inute), h(our)
# burst=<number> allows temporary spikes above the rate limit
# memory=<size> sets memory allocation for tracking (e.g., 10m = 10 megabytes)

# General endpoints (most web traffic)
RATE_LIMIT_GENERAL_RATE=10r/s
RATE_LIMIT_GENERAL_BURST=20
RATE_LIMIT_GENERAL_MEMORY=10m

# Login/Authentication endpoints (stricter to prevent brute force)
RATE_LIMIT_LOGIN_RATE=5r/m
RATE_LIMIT_LOGIN_BURST=5
RATE_LIMIT_LOGIN_MEMORY=10m

# API endpoints (higher throughput for legitimate API usage)
RATE_LIMIT_API_RATE=50r/s
RATE_LIMIT_API_BURST=50
RATE_LIMIT_API_MEMORY=10m

# Heavy API operations (database intensive, file processing, etc.)
RATE_LIMIT_API_HEAVY_RATE=20r/s
RATE_LIMIT_API_HEAVY_BURST=10
RATE_LIMIT_API_HEAVY_MEMORY=10m

# WebSocket connections (connection establishment rate)
RATE_LIMIT_WEBSOCKET_RATE=5r/s
RATE_LIMIT_WEBSOCKET_BURST=3
RATE_LIMIT_WEBSOCKET_MEMORY=10m

# File uploads (very strict to prevent abuse)
RATE_LIMIT_UPLOAD_RATE=2r/s
RATE_LIMIT_UPLOAD_BURST=1
RATE_LIMIT_UPLOAD_MEMORY=10m

# Upload configuration
UPLOAD_MAX_SIZE=100M
